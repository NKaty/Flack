{% extends "base.html" %}

{% block title %}Channels - Chat{% endblock %}

{% block page_content %}
<h2>{{ chats.user.username }}</h2>
<div class="row">
    <div class="col-3">
        <h3>Channels</h3>
        <ul id="channels">
            {% if chats.channels %}
            {% for channel in chats.channels %}
            <li class="{{ 'active' if chats.user.current_channel.name == channel.name }}" data-channel="{{ channel.name }}">{{ channel.name }}</li>
            {% endfor %}
            {% endif %}
        </ul>
    </div>
    <div class="col-6">
        <ul id="messages">
            {% if chats.messages %}
            {% for message in chats.messages %}
            <li>{{ message.text }}</li>
            {% endfor %}
            {% endif %}
        </ul>
        <input id="message" type="text">
        <button id="send">Send</button>
    </div>
    <div class="col-3">
        <h3>Members</h3>
        <ul id="members">
            {% if chats.members %}
            {% for member in chats.members %}
            <li>{{ member.username }}</li>
            {% endfor %}
            {% endif %}
        </ul>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
<script src="{{ url_for('static', filename='sockets.js') }}"></script>
{% endblock %}